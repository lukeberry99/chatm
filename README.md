# ChatMi
###### Highly available chat server built in Go

## Key requirements

1. Chat app
    1.1 Uses redis for message exchange
    1.2 Horizontally scalable
2. Docker
3. Deployed to ECS / Fargate
4. WebSockets
5. Stateless

## Example architecture
```
                    ┌──────────────────────┐                  
                    │    load balancer     │                  
 ecs                └──────────────────────┘                  
┌────────────────────────────────────────────────────────────┐
│                                                            │
│            cluster1                     cluster2           │
│   ┌─────────────────────────┐  ┌─────────────────────────┐ │
│   │ ┌─────────┐┌─────────┐  │  │ ┌─────────┐┌─────────┐  │ │
│   │ │   app   ││   app   │  │  │ │   app   ││   app   │  │ │
│   │ └─────────┘└─────────┘  │  │ └─────────┘└─────────┘  │ │
│   │       ┌─────────┐       │  │       ┌─────────┐       │ │
│   │       │   app   │       │  │       │   app   │       │ │
│   │       └─────────┘       │  │       └─────────┘       │ │
│   └─────────────────────────┘  └─────────────────────────┘ │
│                                                            │
│                        redis cluster                       │
│                 ┌───────────────────────────┐              │
│                 │  ┌─────────┐ ┌─────────┐  │              │
│                 │  │  redis  │ │  redis  │  │              │
│                 │  └─────────┘ └─────────┘  │              │
│                 │        ┌─────────┐        │              │
│                 │        │  redis  │        │              │
│                 │        └─────────┘        │              │
│                 └───────────────────────────┘              │
└────────────────────────────────────────────────────────────┘
```
